<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{template/index.html}" lang="ru">

<th:block layout:fragment="breadcrumbs">
    <div class="row">
        <div class="col-sm-6">
            <h5 style="margin: 0">Редактирование услуг</h5>
        </div>
      <!--  <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right text-sm">
                <li class="breadcrumb-item"><a href="/">
                    <i class="fa-solid fa-house"></i> Главная</a></li>
                <li class="breadcrumb-item active">Редактирование страницы</li>
            </ol>
        </div>  -->
    </div>
</th:block>

<th:block layout:fragment="content">

    <section class="content" >
        <div class="box">
            <div class="box-body" >
                <div>

            <div class="tabs" >
                    <input type="radio" name="tab-btn" id="tab-btn-1" value="" checked>
                    <label for="tab-btn-1">Услуги</label>
                    <input type="radio" name="tab-btn" id="tab-btn-2" value="">
                    <label for="tab-btn-2">Единицы измерения</label>

                    <div id="content-1">
                        <form name="form1" method="post" th:action="@{system-settings/admin-service}">
                                <div class="row form-service" th:each="oneService : ${serviceAttr}">
                                    <div class="col-xs-12 col-sm-7">
                                        <div class="form-group">
                                            <label for="service-name">Услуга</label>
                                            <input onchange="updateServiceInput(this)"  th:id="${oneService.id}" type="text" id="service-name" th:value="${oneService.name}" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-5">
                                        <div class="form-group">
                                            <label for="units-select">Ед. изм.</label>
                                            <div class="input-group">
                                                <select id="units-select" th:id="${oneService.id}" onchange="updateServiceSelect(this)">
                                                    <option th:each="unit: ${unitAttr}"
                                                            th:id="${unit.id}"
                                                            th:text="${unit.name}"
                                                            th:selected="${oneService.unit.getName() == unit.name} "/>
                                                </select>
                                                <span class="input-group-btn">
                                                    <button th:disabled="${oneService.used} ? true : false" th:id="${oneService.id}" onclick="removeServiceInput(this)" type="button" class="btn btn-default"><i class="fa fa-trash"></i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12">
                                        <input type="hidden" name="showInCounters" th:value="${oneService.showInCounters} == false" value="false">
                                        <label>
                                            <input onchange="updateServiceCheckBox(this)" th:id="${oneService.id}" type="checkbox" id="service-0-is_counter" th:checked="${oneService.showInCounters}" name="showInCounters" value="1" checked=""> Показывать в счетчиках</label>
                                            <div style="margin-bottom: 16px;"></div>
                                    </div>
                                </div>
                        </form>

                        <form name="form2" method="post" th:action="@{/add-services}">
                            <button id="base-service" type="button" class="btn btn-default  pull-left">Добавить</button>
                            <div class="row" style="margin-top: 100px; margin-left: 40%">
                                <div class="col-xs-12 text-center">
                                    <div class="form-group">
                                        <a href="/system-tuning/admin-service" class="btn btn-default">Отменить</a>
                                        <button type="button" onclick="submitNewServices()" class="btn btn-success">Сохранить</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div id="content-2">
                            <form name="form3" id="id-form-3" method="post" th:action="@{/update-units}" >
                                <div class="tab-pane clearfix " id="tab_serviceunit">
                                    <div class="current_unit_item" th:each="el : ${unitAttr}">
                                        <div id="form-serviceunit-0" class="row form-serviceunit" >
                                            <div class="col-xs-12">
                                                <div class="form-group" style="margin-left: 20px">
                                                    <label for="serviceunit-0-name">Ед. изм.</label>
                                                    <div class="input-group">
                                                        <input onchange="updateUnitInput(this)" th:id="${el.id}" type="text" id="serviceunit-0-name"  class="form-control" name="ServiceUnit" th:value="${el.name}">
                                                        <span class="input-group-btn">
                                                            <button name="removeBtn" th:disabled="${el.used} ? true : false" th:id="${el.id}" onclick="removeUnitInput(this)" type="button" class="btn btn-default"><i class="fa fa-trash"></i></button>
                                                            </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>

                            <form name="form4" id="test-form" method="post" th:action="@{/add-units}" >
                                <button id="raz" type="button" class="btn btn-default  pull-left">Добавить</button>

                                <div class="row" style="margin-top: 100px; margin-left: 40%">
                                    <div class="col-xs-12 text-center">
                                        <div class="form-group">
                                            <a href="/system-settings/admin-service" class="btn btn-default">Отменить</a>
                                            <span><button id="thisButton" type="button" onclick="submitNewUnits()" class="btn btn-success">Сохранить</button></span>
                                        </div>
                                    </div>
                                </div>
                            </form>
                    </div>
            </div>
            </div>
            </div>
        </div>
    </section>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="/js/systemTuningUnits.js"></script>
        <script src="/js/systemTuningServices.js"></script>
        <script  th:inline="javascript">let units = [[${unitAttr}]];</script>

</th:block>
</html>
